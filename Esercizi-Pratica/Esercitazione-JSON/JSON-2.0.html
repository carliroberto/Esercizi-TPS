<html>
    <head>

        <title>JSON e LocalStorage Versione 2.0 - Carli Roberto</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="styles-JSON.css">

        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Audiowide">

        <link rel="icon" type="image/x-icon" href="Favicon.ico">

    </head>

    <body>

        <div class="home">

            <center>

            <div class="container">

                <div class="btn"><a href="../index.html">TORNA AGLI <br> ESERCIZI</a></div>

            </div>

            </center>

        </div>

        <div class="titolo">

            <h1>JSON e LocalStorage</h1>

            <hr style="width: 100%;">

        </div>

        <div class="input">

            <p>- Inserisci Nome e Cognome: </p>

            <br>

            <input class="stileinput" type="text" id="nome" placeholder="Es. Roberto">

            <input class="stileinput" type="text" id="cognome" placeholder="Es. Carli">

            <br><br>

            <p>- Inserisci Email e Telefono: </p>

            <br>

            <input class="stileinput" type="email" id="email" placeholder="Es. mario.rossi@gmail.com">

            <input class="stileinput" type="tel" id="telefono" placeholder="Es. 340-1592195">

            <br><br>

            <p>- Seleziona il tuo Sesso:</p>

            <br>

            <center>

                <input class="stileinput" type="radio" id="sesso1" name="sesso" value="Uomo">
                <label for="Uomo">Uomo</label>
                <input class="stileinput" type="radio" id="sesso2" name="sesso" value="Donna">
                <label for="Donna">Donna</label>
                <input class="stileinput" type="radio" id="sesso3" name="sesso" value="Altro">
                <label for="Altro">Altro</label>

            </center>

            <br>

            <p>- Seleziona i tuoi Interessi:</p>

            <br>

            <center>

                <input class="stileinput" type="checkbox" id="interesse1" name="interessi" value="Calcio">
                <label for="interesse1">Calcio</label>
                <input class="stileinput" type="checkbox" id="interesse2" name="interessi" value="Fai da Te">
                <label for="interesse2">Fai da Te</label>
                <input class="stileinput" type="checkbox" id="interesse3" name="interessi" value="Giardinaggio">
                <label for="interesse3">Giardinaggio</label>

            </center>

            <br>

            <p>- Inserisci la Data di Nascita: </p>

            <br>

            <center>

                <input class="stileinput" type="date" id="datanascita">

            </center>

        </div>

        <div class="bottone">

             <input class="stile" type="button" onclick="Inserisci()" value="Inserisci Dati">

            <input class="stile" type="button" onclick="Stampa()" value="Stampa Dati">

        </div>

        <div class="output">

            <p id="out"></p>

        </div>

        <script>

            const finale = [];

            const array = [];

            function Inserisci(){

                let nome=document.getElementById("nome").value;
                let cognome=document.getElementById("cognome").value;
                let email=document.getElementById("email").value;
                let telefono=document.getElementById("telefono").value;
                let datanascita=document.getElementById("datanascita").value;
                const sesso = [];
                const interessi = [];

                for(var i=0, j=1; i<3; i++, j++) {
                    var cond;
                    cond=document.getElementsByName("sesso")[i]?.checked;
                    if(cond==true) {
                        sesso.push(" " + document.getElementsByName("sesso")[i].value);
                    }
                }

                for(var i=0, j=1; i<3; i++, j++) {
                    var cond;
                    cond=document.getElementsByName("interessi")[i]?.checked;
                    if(cond==true) {
                        interessi.push(" " + document.getElementsByName("interessi")[i].value);
                    }
                }

                array.push("<br>Nome: "+nome);
                array.push("<br>Cognome: "+cognome);
                array.push("<br>Email: "+email);
                array.push("<br>Telefono: "+telefono);
                array.push("<br>Sesso: "+sesso);
                array.push("<br>Interessi: "+interessi);
                array.push("<br>Data di nascita: "+datanascita);

                finale.push("<br>" + array);

                array.length=0;

                document.getElementById("nome").value = "";
                document.getElementById("cognome").value = "";
                document.getElementById("email").value = "";
                document.getElementById("telefono").value = "";
                document.getElementById("sesso1").checked = false;
                document.getElementById("sesso2").checked = false;
                document.getElementById("sesso3").checked = false;
                document.getElementById("interesse1").checked = false;
                document.getElementById("interesse2").checked = false;
                document.getElementById("interesse3").checked = false;
                document.getElementById("datanascita").value = "";

            }

            function Stampa(){
                const obj = {Finale: finale};
                const oggetto = JSON.stringify(obj);

                if (typeof(Storage) !== "undefined") {
                    localStorage.setItem("Oggetto", oggetto);
                }

                else {
                    document.getElementById("out").innerHTML = "Il browser non supporta lo storage";
                }
                document.location.href="Stampa-JSON-LocalStorage-2.0.html";
            }

        </script>
    </body>
</html>
